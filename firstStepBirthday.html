<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>MyDiary</title>
		<link rel="stylesheet" type="text/css" href="css/jquery.fullPage.css" />
		<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
		<link rel="stylesheet" type="text/css" href="css/base.css">
		<link rel="stylesheet" type="text/css" href="css/first_step_birthday.css">
		<link rel="stylesheet" type="text/css" href="css/jquery-ui.css">
		
		<script src="libs/jquery.min.js"></script>
		<script src="libs/popper.min.js"></script>
		<script src="libs/jquery-ui.js"></script>
		<script src="libs/bootstrap.js"></script>
		<script src="libs/jquery.fullPage.js"></script>
	</head>
	<body>
		<header>
			<div class="row">
				<div class="col-6 text-right">
					<button class="button birthday active">
						<img src="images/cake-blue.png" class="birthday-icon-small" alt="birthday-cake">
						<span><strong>Your Birthday</strong></span>
					</button>
				</div>
				<div class="col-6 text-left">
					<button class="button mood">
						<img src="images/hand-light.png" class="mood-icon-small" alt="hand">
						<span><strong>Entries Mood</strong></span>
					</button>
				</div>
			</div>
		</header>
		<div id="fullpage">
			<div class="section active" id="section-1">
				<div class="container">
					<div class="">
						<div class="col-8 offset-2 col-lg-10 offset-lg-1 col-md-12 offset-md-0 col-sm-12 offset-sm-0">
							<img src="images/cake-dark.png" class="big-icon" alt="birthday-cake">
							<h1 class="big-header mt-4"><strong>Let's find your birthday</strong></h1>
							<p class="feature-desc-text mt-4 col-10 offset-1">
								<strong>Your diary entries have a lot of interesting data!</strong> Our software can analyze your entries and find out all kinds of interesting things. Let's start with your birthday. You haven't told us that date, but let's take a look at your mails and see if we can work it out.</p>
						</div>
						<div class="col-8 offset-2 mt-5">
							<button class="button blue-border-bg" onclick="window.location='firstStepMood.html'">
								<span><strong>Maybe later</strong></span>
							</button>
							<button class="button get-started" onclick="moveToSlide(2)">
								<span><strong>Ok, let's see</strong></span>
							</button>
						</div>
						<div class="col-12 mt-5 md-text dark-text">
							<a href="dashboard.html"><p><strong>Skip and go to my dashboard</strong></p></a>
						</div>
					</div>
				</div>
			</div>
			<div class="section" id="section-2">
				<div class="container mt-5">
					<div class="">
						<div class="col-8 offset-2 col-lg-10 offset-lg-1 col-md-12 offset-md-0 col-sm-12 offset-sm-0">
							<h3 class="mt-4"><strong>Days Analysis</strong></h3>
							<p class="feature-desc-text mt-2 col-10 offset-1">
								Our analytical capabilities allow us to identify important days based on your interactions.
							</p>
							<img src="images/calendars.png" class="calendars-img" alt="calendars">
						</div>
						<div class="progress col-2 offset-5 mt-3">
						  <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
						</div>
					</div>
				</div>
			</div>
			<div class="section" id="section-3">
				<div class="container">
					<div class="row">
						<div class="col-8 offset-2 col-lg-10 offset-lg-1 col-md-12 offset-md-0 col-sm-12 offset-sm-0">
							<img src="images/cake-dark.png" class="big-icon" alt="birthday-cake">
							<h1 class="big-header mt-4" id="birthday-result-title"></h1>
							<p class="feature-desc-text mt-4 col-12">
								Based on our analytics, it looks like this is the special date, <strong>Is that right?</strong>
							</p>
						</div>
						<div class="col-12 mt-8">
							<button class="button blue-border-bg col-4" onclick="loadResultsScreen(1)">
								<span><strong>Way off</strong></span>
							</button>
							<button class="button blue-border-bg col-4" onclick="loadResultsScreen(2)">
								<span><strong>Close but not quite</strong></span>
							</button>
							<button class="button get-started col-4" onclick="loadResultsScreen(3)">
								<span><strong>Spot on!</strong></span>
							</button>
						</div>
					</div>
				</div>
			</div>
			<div class="section" id="section-4">
				<div class="container">
					<div class="row">
						<div class="col-8 offset-2 col-lg-10 offset-lg-1 col-md-12 offset-md-0 col-sm-12 offset-sm-0">
							<img src="images/cake-dark.png" class="big-icon" alt="birthday-cake">
							<img src="images/success.png" class="big-icon result" id="result-icon" alt="correct">
							<h2 class="mt-4" id="result-title"></h2>
							<p class="feature-desc-text mt-4 col-12" id="result-description">
								
							</p>
						</div>
						<div class="col-12 mt-8">
							<button class="button blue-border-bg col-4" id="maybelaterbutton" onclick="window.location='dashboard.html'">
								<span><strong>Maybe later</strong></span>
							</button>
							<div class="button calendar mt-3" id="birthdatebutton">
								<input type="text" id="datepicker" placeholder="MM/DD/YYYY">
								<label for="datepicker"><img src="images/calendar-light.png" alt="calendar" class="btn-small-icon"></label>
							</div>
							<button class="button get-started col-4" id="entriesmoodbutton" onclick="window.location='firstStepMood.html'">
								<span><strong>Entries Mood</strong></span>
							</button>
						</div>
						<div class="col-12 mt-5 md-text dark-text" id="skiplink">
							<a href="signup.html"><p><strong>Skip and go to my dashboard</strong></p></a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<footer>
			<div class="container">
				<div class="row justify-content-center">
					<img src="images/full-logo-blue.png" class="footer-logo" alt="mydiary-logo">
				</div>
			</div>
		</footer>
		<script>

			var url = "https://api.myjson.com/bins/75cex";
			var jsonData;

			$(document).ready(function(){
				loadData();
				setPagerNavigation();
				$( "#datepicker" ).datepicker({
					onSelect: function(){
						window.location='firstStepMood.html';
					}
				});
			});

			function loadData(){
				$.getJSON( url, function( data ) {
				  if(data!=null){
				  	jsonData = data;
				  }
				});
			}

			function setPagerNavigation(){
				$('#fullpage').fullpage({
					//Navigation
					navigation: false,
					showActiveTooltip: false,
					scrollingSpeed: 600,
				});
				$.fn.fullpage.setMouseWheelScrolling(false);
	    		$.fn.fullpage.setAllowScrolling(false);
	    		$.fn.fullpage.setMouseWheelScrolling(false);
	    		$.fn.fullpage.setKeyboardScrolling(false);
			}

    		function moveToSlide(slideNum){
    			$.fn.fullpage.silentMoveTo(slideNum);
    			if(slideNum==2){
    				showLoader();
    				$('.progress-bar').css('width', '100%').attr('aria-valuenow', 100);
    			}
    		}

    		function showLoader(){
    			var interval = setTimeout("updateProgress()", 2000);
    		}

    		function updateProgress(){
	    		moveToSlide(3);
	    		$('#birthday-result-title').html("<strong>Your birthday is " + jsonData.birthday + "</strong>");
	    	}

    		function loadResultsScreen(resultCode){
    			var titleText, descText;
    			var imagePath = "images/error.png";

    			$('#maybelaterbutton').hide();
    			$('#birthdatebutton').hide();
    			$('#entriesmoodbutton').hide();
    			$('#skiplink').hide();

    			switch(resultCode){
    				case 1:
    					titleText = "<strong>Way Off!</strong>";
    					descText = "Hmm, we'll check what's happening behind the scenes. <strong><br>In the meantime, let's see what else we can learn.</strong>";
    					$('#entriesmoodbutton').show();
    					$('#skiplink').show();
    					break;
    				case 2:
    					titleText = "<strong>Close but not quite</strong>";
    					descText = "<strong>Oh, not quite right?</strong> Wonder where we slipped up.<br>Can you tell us your birthday so we can learn and improve?";
    					$('#birthdatebutton').show();
    					break;
    				case 3:
    					titleText = "<strong>Spot On!</strong>";
    					descText = "See, your entries can tell us a lot! <strong>Let's see what else we can learn.</strong>";
    					imagePath = "images/success.png";
    					$('#maybelaterbutton').show();
    					$('#entriesmoodbutton').show();

    					break;
    			}

    			$('#result-title').html(titleText);
    			$('#result-description').html(descText);
				$('#result-icon').attr('src', imagePath);

				$.fn.fullpage.silentMoveTo(4);
    		}

		</script>
	</body>
</html>